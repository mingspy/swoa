@{
    string FlowID = Request.QueryString["flowid"];
    string StepID = Request.QueryString["stepid"];
    string GroupID = Request.QueryString["groupid"];
    string TaskID = Request.QueryString["taskid"];
    string InstanceID = Request.QueryString["instanceid"];
    string DisplayModel = Request.QueryString["display"] ?? "0";
    string DBConnID = "06075250-30dc-4d32-bf97-e922cb30fac8";
    string DBTable = "FMS_ReceiveDocuments";
    string DBTablePK = "ID";
    string DBTableTitle = "FileName";
    if(InstanceID.IsNullOrEmpty()){InstanceID = Request.QueryString["instanceid1"];}
    YJ.Platform.Dictionary BDictionary = new YJ.Platform.Dictionary();
    YJ.Platform.WorkFlow BWorkFlow = new YJ.Platform.WorkFlow();
    YJ.Platform.WorkFlowTask BWorkFlowTask = new YJ.Platform.WorkFlowTask();
    string fieldStatus = BWorkFlow.GetFieldStatus(FlowID, StepID);
    LitJson.JsonData initData = BWorkFlow.GetFormData(DBConnID, DBTable, DBTablePK, InstanceID, fieldStatus, "{\"fms_receivedocuments.rddate\":\"yyyy年MM月dd日\"}");
    string TaskTitle = BWorkFlow.GetFromFieldData(initData, DBTable, DBTableTitle);
}
<link href="~/Scripts/FlowRun/Forms/flowform.css" rel="stylesheet" type="text/css" />
<script src="~/Scripts/FlowRun/Forms/common.js" type="text/javascript" ></script>
<input type="hidden" id="Form_ValidateAlertType" name="Form_ValidateAlertType" value="1" />
<input type="hidden" id="Form_TitleField" name="Form_TitleField" value="FMS_ReceiveDocuments.FileName" />
<input type="hidden" id="Form_DBConnID" name="Form_DBConnID" value="06075250-30dc-4d32-bf97-e922cb30fac8" />
<input type="hidden" id="Form_DBTable" name="Form_DBTable" value="FMS_ReceiveDocuments" />
<input type="hidden" id="Form_DBTablePk" name="Form_DBTablePk" value="ID" />
<input type="hidden" id="Form_DBTableTitle" name="Form_DBTableTitle" value="FileName" />
<input type="hidden" id="Form_AutoSaveData" name="Form_AutoSaveData" value="1" />
<textarea id="Form_DBTableTitleExpression" name="Form_DBTableTitleExpression" style="display:none;width:0;height:0;"></textarea>
<script type="text/javascript">
	var initData = @Html.Raw(BWorkFlow.GetFormDataJsonString(initData));
	var fieldStatus = "1"=="@Request.QueryString["isreadonly"]" ? {} : @Html.Raw(fieldStatus);
	var displayModel = '@DisplayModel';
	$(window).load(function (){
		formrun.initData(initData, "FMS_ReceiveDocuments", fieldStatus, displayModel);
	});
</script>
<style type="text/css">#pdfContainer {
    position: absolute;
    top: 5px;
    height:560px;
    width:95%;
    }</style><script type="text/javascript">$(window).load(function (){
      Selects();
    });
  function Selects() {
     var urls = document.location.toString();
　　　var arrObj = urls.split("?");
      var stepid=null;
      if (arrObj.length >1) {
　　　　　　var arrPara = arrObj[1].split("&");
　　　　　　var arr;

　　　　　　for (var i = 0; i < arrPara.length; i++) {
　　　　　　　　arr = arrPara[i].split("=");

　　　　　　　　if (arr != null && arr[0] == 'stepid') {
　　　　　　　　　　stepid=arr[1]
　　　　　　　　}
　　　　　　}
　　　　}
     if(stepid=='9824d083-2e04-4641-a224-a392425a5fc5'||stepid==null){
      var pdfUrl = document.getElementById("FMS_ReceiveDocuments.LeadershipOpinion3").value;
      var fj =  document.getElementById("FMS_ReceiveDocuments.FlieAddress_text").value;
     if(pdfUrl!="" && fj!="" && pdfUrl!=null && fj!=null){
      document.getElementById("pdfContainer").attributes.src.value =pdfUrl;
      document.getElementById("ifTr").style.height = "600px";
    }
    }else{
      var pdfUrl = document.getElementById("myP").children[0].innerHTML;
      if(pdfUrl!="" && pdfUrl!=null ){
      document.getElementById("pdfContainer").attributes.src.value =pdfUrl;
      document.getElementById("ifTr").style.height = "600px";
      }
    }
    
   
  }</script><p style="display:none;" id="myP"><input id="FMS_ReceiveDocuments.LeadershipOpinion3" type1="flow_text" name="FMS_ReceiveDocuments.LeadershipOpinion3" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/></p><p><br/></p><link href="~/Content/Theme/tablenew.css" rel="stylesheet"/><script type="text/javascript"></script><table class="flowformtable tableF table table-bordered" data-sort="sortDisabled" width="NaN" cellspacing="0" cellpadding="0" align="center"><tbody><tr class="firstRow"><th rowspan="1" colspan="4" valign="middle" align="center"><span class="title">公文登记</span></th></tr><tr><th class="titleT" rowspan="1" colspan="4" valign="middle" align="center"><br/></th></tr><tr class="firstRow"><td class="top" style="width:10%" rowspan="1" colspan="1"><span class="txt">序号</span></td><td class="top" style="width:35%" rowspan="1" colspan="1"><input type1="flow_serialnumber" id="FMS_ReceiveDocuments.No" maxfiled="No" name="FMS_ReceiveDocuments.No" value="" style="border: medium none; width: 90%; height: 25px; background-color: rgb(232, 232, 232);" placeholder="本序号自动生成无需手动录入" sqlwhere="" length="6" type="text" isflow="1" class="mytext" title="" readonly=""/><input type="hidden" value="FMS_ReceiveDocuments.No" name="HasSerialNumber"/><input type="hidden" value="{'formatstring':'','sqlwhere':'','length':'6','maxfiled':'No'}" name="HasSerialNumberConfig_FMS_ReceiveDocuments.No"/></td><td class="top" rowspan="1" colspan="1" width="10%"><span class="txt">收文序号</span></td><td class="top" rowspan="1" colspan="1" width="35%"><input id="FMS_ReceiveDocuments.RDNo" type1="flow_text" name="FMS_ReceiveDocuments.RDNo" value="" style="border: currentColor; border-image: none; width: 95%; height: 25px;" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/></td></tr><tr><td rowspan="1" colspan="1"><span class="txt">收文日期</span><br/></td><td rowspan="1" colspan="1"><input type1="flow_datetime" id="FMS_ReceiveDocuments.RDDate" name="FMS_ReceiveDocuments.RDDate" value="" style="border: currentColor; border-image: none; width: 95%; height: 25px;" format="yyyy年MM月dd日" defaultvalue="" istime="0" daybefor="0" dayafter="0" currentmonth="0" type="text" isflow="1" class="mycalendar" title=""/></td><td rowspan="1" colspan="1"><span class="txt">发文单位</span></td><td rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.RDCompany" type1="flow_text" name="FMS_ReceiveDocuments.RDCompany" value="" style="border: currentColor; border-image: none; width: 95%; height: 25px;" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/></td></tr><tr><td rowspan="1" colspan="1"><span class="txt">文件号</span></td><td rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.FileNo" type1="flow_text" name="FMS_ReceiveDocuments.FileNo" value="" style="border: currentColor; border-image: none; width: 95%; height: 25px;" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/></td><td rowspan="1" colspan="1"><span class="txt">文件名称</span></td><td rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.FileName" type1="flow_text" name="FMS_ReceiveDocuments.FileName" value="" style="border: currentColor; border-image: none; width: 95%; height: 25px;" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/></td></tr><tr><td rowspan="1" colspan="1"><span class="txt">文件类型</span></td><td rowspan="1" colspan="1"><select class="mycombox" id="FMS_ReceiveDocuments.FileType" name="FMS_ReceiveDocuments.FileType" style="width:50px" datasource="1" listmode="0" isflow="1" type1="flow_combox"><option value="3"></option><option value="0">加密公文</option><option value="1">紧急公文</option><option value="2">普通公文</option><option value="4">督办公文</option></select></td><td rowspan="1" colspan="1"><span class="txt">是/否需要落实</span></td><td class="Tradio" rowspan="1" colspan="1"><input type="radio" name="FMS_ReceiveDocuments.ToConfirm" id="FMS_ReceiveDocuments.ToConfirm_0" value="1" style="vertical-align:middle;" isflow="1" type1="flow_radio"/><label for="FMS_ReceiveDocuments.ToConfirm_0" style="vertical-align:middle;margin-right:3px;">是</label><input type="radio" name="FMS_ReceiveDocuments.ToConfirm" id="FMS_ReceiveDocuments.ToConfirm_1" value="2" style="vertical-align:middle;" isflow="1" type1="flow_radio"/><label for="FMS_ReceiveDocuments.ToConfirm_1" style="vertical-align:middle;margin-right:3px;">否</label></td></tr><tr><td rowspan="1" colspan="1"><span class="txt"><span class="txt">处理期限</span></span></td><td rowspan="1" colspan="3"><input id="FMS_ReceiveDocuments.HandleTerm" type1="flow_text" name="FMS_ReceiveDocuments.HandleTerm" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><br/></td></tr><tr><td class="bottom" rowspan="1" colspan="1">督察处落实情况<br/></td><td class="bottom" rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.DCCProcessSituation" type1="flow_text" name="FMS_ReceiveDocuments.DCCProcessSituation" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><input type1="flow_signature" isflow="1" id="FMS_ReceiveDocuments.DCCProcessingName_text" class="mybutton" onclick="signature('FMS_ReceiveDocuments.DCCProcessingName_text',false);" id1="FMS_ReceiveDocuments.DCCProcessingName" name="FMS_ReceiveDocuments.DCCProcessingName_text" value=" 签 章 " ispassword="undefined" src="@(string.Concat("/Content/UserSigns/", YJ.Platform.Users.CurrentUserID, ".gif"))" type="button"/></td><td class="bottom" rowspan="1" colspan="1">落实情况附件上传<br/></td><td class="bottom" rowspan="1" colspan="1"><input type1="flow_files" id="FMS_ReceiveDocuments.DCCProcessSituationflies" name="FMS_ReceiveDocuments.DCCProcessSituationflies" value="" filetype="" type="text" isflow="1" class="myfile" title=""/></td></tr><tr><td class="bottom" rowspan="1" colspan="1">法规处落实情况</td><td class="bottom" rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.FGCProcessSituation" type1="flow_text" name="FMS_ReceiveDocuments.FGCProcessSituation" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><input type1="flow_signature" isflow="1" id="FMS_ReceiveDocuments.FGCProcessingName_text" class="mybutton" onclick="signature('FMS_ReceiveDocuments.FGCProcessingName_text',false);" id1="FMS_ReceiveDocuments.FGCProcessingName" name="FMS_ReceiveDocuments.FGCProcessingName_text" value=" 签 章 " ispassword="undefined" src="@(string.Concat("/Content/UserSigns/", YJ.Platform.Users.CurrentUserID, ".gif"))" type="button"/></td><td class="bottom" rowspan="1" colspan="1">落实情况附件上传</td><td class="bottom" rowspan="1" colspan="1"><input type1="flow_files" id="FMS_ReceiveDocuments.FGCProcessSituationflies" name="FMS_ReceiveDocuments.FGCProcessSituationflies" value="" filetype="" type="text" isflow="1" class="myfile" title=""/></td></tr><tr><td class="bottom" rowspan="1" colspan="1">指挥调度处落实情况</td><td class="bottom" rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.ZHDUCProcessSituation" type1="flow_text" name="FMS_ReceiveDocuments.ZHDUCProcessSituation" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><input type1="flow_signature" isflow="1" id="FMS_ReceiveDocuments.ZHDUCProcessSituation_text" class="mybutton" onclick="signature('FMS_ReceiveDocuments.ZHDUCProcessSituation_text',false);" id1="FMS_ReceiveDocuments.ZHDUCProcessSituation" name="FMS_ReceiveDocuments.ZHDUCProcessSituation_text" value=" 签 章 " ispassword="undefined" src="@(string.Concat("/Content/UserSigns/", YJ.Platform.Users.CurrentUserID, ".gif"))" type="button"/></td><td class="bottom" rowspan="1" colspan="1">落实情况附件上传</td><td class="bottom" rowspan="1" colspan="1"><input type1="flow_files" id="FMS_ReceiveDocuments.ZHDUCProcessSituationflies" name="FMS_ReceiveDocuments.ZHDUCProcessSituationflies" value="" filetype="" type="text" isflow="1" class="myfile" title=""/></td></tr><tr><td class="bottom" rowspan="1" colspan="1">办公室落实情况</td><td class="bottom" rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.BGSProcessSituation" type1="flow_text" name="FMS_ReceiveDocuments.BGSProcessSituation" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><input type1="flow_signature" isflow="1" id="FMS_ReceiveDocuments.BGSProcessingName_text" class="mybutton" onclick="signature('FMS_ReceiveDocuments.BGSProcessingName_text',false);" id1="FMS_ReceiveDocuments.BGSProcessingName" name="FMS_ReceiveDocuments.BGSProcessingName_text" value=" 签 章 " ispassword="undefined" src="@(string.Concat("/Content/UserSigns/", YJ.Platform.Users.CurrentUserID, ".gif"))" type="button"/></td><td class="bottom" rowspan="1" colspan="1">落实情况附件上传</td><td class="bottom" rowspan="1" colspan="1"><input type1="flow_files" id="FMS_ReceiveDocuments.BGSProcessSituationflies" name="FMS_ReceiveDocuments.BGSProcessSituationflies" value="" filetype="" type="text" isflow="1" class="myfile" title=""/></td></tr><tr><td class="bottom" rowspan="1" colspan="1">警察大队落实情况</td><td class="bottom" rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.JCProcessSituation" type1="flow_text" name="FMS_ReceiveDocuments.JCProcessSituation" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><input type1="flow_signature" isflow="1" id="FMS_ReceiveDocuments.JCDDProcessingName_text" class="mybutton" onclick="signature('FMS_ReceiveDocuments.JCDDProcessingName_text',false);" id1="FMS_ReceiveDocuments.JCDDProcessingName" name="FMS_ReceiveDocuments.JCDDProcessingName_text" value=" 签 章 " ispassword="undefined" src="@(string.Concat("/Content/UserSigns/", YJ.Platform.Users.CurrentUserID, ".gif"))" type="button"/></td><td class="bottom" rowspan="1" colspan="1">落实情况附件上传</td><td class="bottom" rowspan="1" colspan="1"><input type1="flow_files" id="FMS_ReceiveDocuments.JCProcessSituationfiles" name="FMS_ReceiveDocuments.JCProcessSituationfiles" value="" filetype="" type="text" isflow="1" class="myfile" title=""/></td></tr><tr><td class="bottom" rowspan="1" colspan="1">福莱山大队落实情况</td><td class="bottom" rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.FLSProcessSituation" type1="flow_text" name="FMS_ReceiveDocuments.FLSProcessSituation" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><input type1="flow_signature" isflow="1" id="FMS_ReceiveDocuments.FLSProcessingName_text" class="mybutton" onclick="signature('FMS_ReceiveDocuments.FLSProcessingName_text',false);" id1="FMS_ReceiveDocuments.FLSProcessingName" name="FMS_ReceiveDocuments.FLSProcessingName_text" value=" 签 章 " ispassword="undefined" src="@(string.Concat("/Content/UserSigns/", YJ.Platform.Users.CurrentUserID, ".gif"))" type="button"/></td><td class="bottom" rowspan="1" colspan="1">落实情况附件上传</td><td class="bottom" rowspan="1" colspan="1"><input type1="flow_files" id="FMS_ReceiveDocuments.FLSProcessSituationflies" name="FMS_ReceiveDocuments.FLSProcessSituationflies" value="" filetype="" type="text" isflow="1" class="myfile" title=""/></td></tr><tr><td class="bottom" rowspan="1" colspan="1">大季家大队落实情况</td><td class="bottom" rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.DJJProcessSituation" type1="flow_text" name="FMS_ReceiveDocuments.DJJProcessSituation" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><input type1="flow_signature" isflow="1" id="FMS_ReceiveDocuments.DJJProcessingName_text" class="mybutton" onclick="signature('FMS_ReceiveDocuments.DJJProcessingName_text',false);" id1="FMS_ReceiveDocuments.DJJProcessingName" name="FMS_ReceiveDocuments.DJJProcessingName_text" value=" 签 章 " ispassword="undefined" src="@(string.Concat("/Content/UserSigns/", YJ.Platform.Users.CurrentUserID, ".gif"))" type="button"/></td><td class="bottom" rowspan="1" colspan="1">落实情况附件上传</td><td class="bottom" rowspan="1" colspan="1"><input type1="flow_files" id="FMS_ReceiveDocuments.DJJProcessSituationflies" name="FMS_ReceiveDocuments.DJJProcessSituationflies" value="" filetype="" type="text" isflow="1" class="myfile" title=""/></td></tr><tr><td class="bottom" rowspan="1" colspan="1">八角大队落实情况</td><td class="bottom" rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.BJProcessSituation" type1="flow_text" name="FMS_ReceiveDocuments.BJProcessSituation" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><input type1="flow_signature" isflow="1" id="FMS_ReceiveDocuments.BJProcessingName_text" class="mybutton" onclick="signature('FMS_ReceiveDocuments.BJProcessingName_text',false);" id1="FMS_ReceiveDocuments.BJProcessingName" name="FMS_ReceiveDocuments.BJProcessingName_text" value=" 签 章 " ispassword="undefined" src="@(string.Concat("/Content/UserSigns/",YJ.Platform.Users.CurrentUserID, ".gif"))" type="button"/></td><td class="bottom" rowspan="1" colspan="1">落实情况附件上传</td><td class="bottom" rowspan="1" colspan="1"><input type1="flow_files" id="FMS_ReceiveDocuments.BJProcessSituationflies" name="FMS_ReceiveDocuments.BJProcessSituationflies" value="" filetype="" type="text" isflow="1" class="myfile" title=""/></td></tr><tr><td class="bottom" rowspan="1" colspan="1">古现大队落实情况</td><td class="bottom" rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.GXProcessSituation" type1="flow_text" name="FMS_ReceiveDocuments.GXProcessSituation" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><input type1="flow_signature" isflow="1" id="FMS_ReceiveDocuments.GXProcessingName_text" class="mybutton" onclick="signature('FMS_ReceiveDocuments.GXProcessingName_text',false);" id1="FMS_ReceiveDocuments.GXProcessingName" name="FMS_ReceiveDocuments.GXProcessingName_text" value=" 签 章 " ispassword="undefined" src="@(string.Concat("/Content/UserSigns/", YJ.Platform.Users.CurrentUserID, ".gif"))" type="button"/></td><td class="bottom" rowspan="1" colspan="1">落实情况附件上传</td><td class="bottom" rowspan="1" colspan="1"><input type1="flow_files" id="FMS_ReceiveDocuments.GXProcessSituationflies" name="FMS_ReceiveDocuments.GXProcessSituationflies" value="" filetype="" type="text" isflow="1" class="myfile" title=""/></td></tr><tr><td class="bottom" rowspan="1" colspan="1">海滨大队落实情况</td><td class="bottom" rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.HBProcessSituation" type1="flow_text" name="FMS_ReceiveDocuments.HBProcessSituation" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><input type1="flow_signature" isflow="1" id="FMS_ReceiveDocuments.HBProcessingName_text" class="mybutton" onclick="signature('FMS_ReceiveDocuments.HBProcessingName_text',false);" id1="FMS_ReceiveDocuments.HBProcessingName" name="FMS_ReceiveDocuments.HBProcessingName_text" value=" 签 章 " ispassword="undefined" src="@(string.Concat("/Content/UserSigns/", YJ.Platform.Users.CurrentUserID, ".gif"))" type="button"/></td><td class="bottom" rowspan="1" colspan="1">落实情况附件上传</td><td class="bottom" rowspan="1" colspan="1"><input type1="flow_files" id="FMS_ReceiveDocuments.HBProcessSituationflies" name="FMS_ReceiveDocuments.HBProcessSituationflies" value="" filetype="" type="text" isflow="1" class="myfile" title=""/></td></tr><tr><td class="bottom" rowspan="1" colspan="1">潮水大队落实情况</td><td class="bottom" rowspan="1" colspan="1"><input id="FMS_ReceiveDocuments.CSProcessSituation" type1="flow_text" name="FMS_ReceiveDocuments.CSProcessSituation" value="" valuetype="0" type="text" isflow="1" class="mytext" title="" align="left"/><input type1="flow_signature" isflow="1" id="FMS_ReceiveDocuments.CSProcessingName_text" class="mybutton" onclick="signature('FMS_ReceiveDocuments.CSProcessingName_text',false);" id1="FMS_ReceiveDocuments.CSProcessingName" name="FMS_ReceiveDocuments.CSProcessingName_text" value=" 签 章 " ispassword="undefined" src="@(string.Concat("/Content/UserSigns/", YJ.Platform.Users.CurrentUserID, ".gif"))" type="button"/></td><td class="bottom" rowspan="1" colspan="1">落实情况附件上传</td><td class="bottom" rowspan="1" colspan="1"><input type1="flow_files" id="FMS_ReceiveDocuments.CSProcessSituationflies" name="FMS_ReceiveDocuments.CSProcessSituationflies" value="" filetype="" type="text" isflow="1" class="myfile" title=""/></td></tr><tr><td class="bottom" rowspan="1" colspan="1"><span class="txt">公文</span></td><td class="bottom" rowspan="1" colspan="3"><input type1="flow_files" id="FMS_ReceiveDocuments.FlieAddress" name="FMS_ReceiveDocuments.FlieAddress" value="" filetype="" type="text" isflow="1" class="myfile" title=""/><br/></td></tr><tr id="ifTr"><td class="top bottom" rowspan="1" colspan="1" style="vertical-align: top;" align="top"><span class="txt">附件预览</span></td><td id="ifTd" class="top bottom" rowspan="1" colspan="3" style="position: relative;"><iframe src id="pdfContainer" name="pdfContainer" frameborder="0"></iframe><br/></td></tr></tbody></table><p><br/></p>